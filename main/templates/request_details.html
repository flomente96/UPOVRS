{% extends 'base.html' %}
{% block content %}
{% load widget %}

	<div id="content">
		<div class="container" style="max-width: 1000px;">
			<center><h1>Request Details</h1></center>
			<hr>
			<br>
				<div class="table-responsive">
				<table class="table">
					<thead>
						<tr>
							<th colspan=2>Request Details</th>
						</tr>
					</thead>
				    <tbody>
						<tr>
							<td>Tracking Number: </td>
					        <td>{{req.pk}}</td>
					    </tr>
					    <tr>
							<td>Date Filed: </td>
					        <td>{{req.date_filed}}</td>
					    </tr>
					    	
						<tr>
					    	<td>Name: </td>
					        <td>{{req.name}}</td>
					    </tr>
					    <tr>
					        <td>Organization: </td>
					        <td>{{req.organization}}</td>
					    </tr>
					    <tr>
					        <td>Purpose: </td>
					        <td>{{req.purpose}}</td>
					    </tr>
					    <tr>
					        <td>Participants: </td>
					        <td>{{req.participants}}</td>
					    </tr>
					    <tr>
					        <td>Speakers: </td>
					        <td>{{req.speakers}}</td>
					    </tr>
					    <tr>
					        <td>Venue: </td>
					        <td>
								{{req.venue_id.name}}
							</td>
					        
					    </tr>
					    <tr>
					        <td>Dates: </td> 
					        <td>
					        	{% for date in date_list %}
					        		{{ date.date_needed }} ({{ date.time_from }} - {{ date.time_to }}) <br>
					        	{% endfor %}
					        </td>
					    </tr>
					    <tr>
					      	<td>Equipment Rented: </td>
					      	<td>
								{% for equipment in equipment_list %}
									{{ equipment.equipment_id }} = {{ equipment.unit }} units <br>
								{% endfor %}
							</td>
					    </tr>
				    </tbody>
				  </table>

			<form method="post" id="status_form" name="remarks_form" action="{% url 'viewrequestdetails' %}?q={{ req.pk }}">
				{% csrf_token %}
				<input type="text" class="form-control hidden" name="request_id" id="request_id" value="{{ req.pk }}">
				<div class="form-group">
					<div class="col-md-12">
						<label>OSA Remarks</label>
						{% if request.user|has_group:"OSA Staff" %} 
							<textarea rows="4" cols="40" id="ex11 comment" class="form-control" name="osa_remarks">{{ status.osa_remarks }}</textarea>
						{% else %}
							<textarea rows="4" cols="40" id="ex11 comment" class="form-control" name="osa_remarks" readonly>{{ status.osa_remarks }}</textarea>
						{% endif %}

					</div>
				</div>
				<div class="form-group">
					<div class="col-md-12">
						<label>Cashier Remarks</label>
						{% if request.user|has_group:"Cashier Staff" %} 
						<textarea rows="4" cols="40" id="ex11 comment" class="form-control" name="cashier_remarks">{{ status.cashier_remarks }}</textarea>
						{% else %}
						<textarea rows="4" cols="40" id="ex11 comment" class="form-control" name="cashier_remarks" readonly>{{ status.cashier_remarks }}</textarea>
						{% endif %}
					</div>
				</div>
				<div class="form-group">
					<div class="col-md-12">
						<label>ADA Remarks</label>
						{% if request.user|has_group:"ADA Staff" %} 
						<textarea rows="4" cols="40" id="ex11 comment" class="form-control" name="ada_remarks">{{ status.ada_remarks }}</textarea>
						{% else %}
						<textarea rows="4" cols="40" id="ex11 comment" class="form-control" name="ada_remarks" readonly>{{ status.ada_remarks }}</textarea>
						{% endif %}
					</div>
				</div>
				<div class="form-group">
					<div class="col-md-12">
						<label>CDMO Remarks</label>
						{% if request.user|has_group:"CDMO Staff" %} 
						<textarea rows="4" cols="40" id="ex11 comment" class="form-control" name="cdmo_remarks">{{ status.cdmo_remarks }}</textarea>
						{% else %}
						<textarea rows="4" cols="40" id="ex11 comment" class="form-control" name="cdmo_remarks" readonly="">{{ status.cdmo_remarks }}</textarea>
						{% endif %}
					</div>
				</div>
				<div id="submit_btn">
					<div class="form-group">
						<div class="col-md-12">
							<input type="text" class="form-control hidden" name="osa_status" id="osa_status" value="P">
							<input type="text" class="form-control hidden" name="cdmo_status" id="cdmo_status" value="P">
							<input type="text" class="form-control hidden" name="ada_status" id="ada_status" value="P">
							<input type="text" class="form-control hidden" name="cashier_status" id="cashier_status" value="P">

							<input type="submit" class="submit-btn btn pull-right" value="Add Remarks" style="background: #ba2121; margin-bottom:20px; margin-left: 10px">
							{% if request.user|has_group:"OSA Staff" %} 
							<input type="button" class="submit-btn btn pull-right" aria-label="Approve" id=osa_aprrove value="Approve" onclick="approveRequest(this.id);">
							{% elif request.user|has_group:"Cashier Staff" %}
							<input type="button" class="submit-btn btn pull-right" aria-label="Approve" id=cashier_aprrove value="Approve" onclick="approveRequest(this.id);">
							{% elif request.user|has_group:"CDMO Staff" %}
							<input type="button" class="submit-btn btn pull-right" aria-label="Approve" id=cdmo_aprrove value="Approve" onclick="approveRequest(this.id);">
							{% elif request.user|has_group:"ADA Staff" %}
							<input type="button" class="submit-btn btn pull-right" aria-label="Approve" id=ada_aprrove value="Approve" onclick="approveRequest(this.id);">
							{% endif %}	
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
{% endblock %}